!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).ejs=e()}}(function(){return function o(s,c,a){function u(n,e){if(!c[n]){if(!s[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(l)return l(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var i=c[n]={exports:{}};s[n][0].call(i.exports,function(e){var t=s[n][1][e];return u(t||e)},i,i.exports,o,s,c,a)}return c[n].exports}for(var l="function"==typeof require&&require,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(e,t,p){"use strict";var o=e("fs"),s=e("path"),h=e("./utils"),n=e("../package.json").version,r="%",i="locals",c=["delimiter","scope","context","debug","compileDebug","client","_with","rmWhitespace","strict","filename"],a=c.concat("cache"),f=/^\uFEFF/;function m(t,e){var n,r,i=e.views;if("/"==t.charAt(0))n=p.resolveInclude(t.replace(/^\/*/,""),e.root||"/",!0);else if(e.filename&&(r=p.resolveInclude(t,e.filename),o.existsSync(r)&&(n=r)),n||Array.isArray(i)&&i.some(function(e){return r=p.resolveInclude(t,e,!0),o.existsSync(r)})&&(n=r),!n)throw new Error('Could not find the include file "'+e.escapeFunction(t)+'"');return n}function u(e,t){var n,r=e.filename,i=1<arguments.length;if(e.cache){if(!r)throw new Error("cache option requires a filename");if(n=p.cache.get(r))return n;i||(t=d(r).toString().replace(f,""))}else if(!i){if(!r)throw new Error("Internal EJS error: no file name or template provided");t=d(r).toString().replace(f,"")}return n=p.compile(t,e),e.cache&&p.cache.set(r,n),n}function d(e){return p.fileLoader(e)}function l(e,t,n,r,i){var o=t.split("\n"),s=Math.max(r-3,0),c=Math.min(o.length,r+3),a=i(n),u=o.slice(s,c).map(function(e,t){var n=t+s+1;return(n==r?" >> ":"    ")+n+"| "+e}).join("\n");throw e.path=a,e.message=(a||"ejs")+":"+r+"\n"+u+"\n\n"+e.message,e}function g(e){return e.replace(/;(\s*$)/,"$1")}function v(e,t){t=t||{};var n={};this.templateText=e,this.mode=null,this.truncate=!1,this.currentLine=1,this.source="",this.dependencies=[],n.client=t.client||!1,n.escapeFunction=t.escape||h.escapeXML,n.compileDebug=!1!==t.compileDebug,n.debug=!!t.debug,n.filename=t.filename,n.delimiter=t.delimiter||p.delimiter||r,n.strict=t.strict||!1,n.context=t.context,n.cache=t.cache||!1,n.rmWhitespace=t.rmWhitespace,n.root=t.root,n.localsName=t.localsName||p.localsName||i,n.views=t.views,n.strict?n._with=!1:n._with=void 0===t._with||t._with,this.opts=n,this.regex=this.createRegex()}p.cache=h.cache,p.fileLoader=o.readFileSync,p.localsName=i,p.promiseImpl=new Function("return this;")().Promise,p.resolveInclude=function(e,t,n){var r=s.dirname,i=s.extname,o=(0,s.resolve)(n?t:r(t),e);return i(e)||(o+=".ejs"),o},p.compile=function(e,t){return t&&t.scope&&(!0,t.context||(t.context=t.scope),delete t.scope),new v(e,t).compile()},p.render=function(e,t,n){var r=t||{},i=n||{};return 2==arguments.length&&h.shallowCopyFromList(i,r,c),u(i,e)(r)},p.renderFile=function(){var e,t,n=Array.prototype.slice.call(arguments),r=n.shift(),i={filename:r};return"function"==typeof arguments[arguments.length-1]&&(e=n.pop()),n.length?(t=n.shift(),n.length?h.shallowCopy(i,n.pop()):t.settings?(t.settings.views&&(i.views=t.settings.views),t.settings["view cache"]&&(i.cache=!0)):h.shallowCopyFromList(i,t,a),i.filename=r):t={},function(n,r,t){var i;if(!t){if("function"==typeof p.promiseImpl)return new p.promiseImpl(function(e,t){try{e(i=u(n)(r))}catch(e){t(e)}});throw new Error("Please provide a callback function")}try{i=u(n)(r)}catch(e){return t(e)}t(null,i)}(i,t,e)},p.clearCache=function(){p.cache.reset()},v.modes={EVAL:"eval",ESCAPED:"escaped",RAW:"raw",COMMENT:"comment",LITERAL:"literal"},v.prototype={createRegex:function(){var e="(<%%|%%>|<%=|<%-|<%_|<%#|<%|%>|-%>|_%>)",t=h.escapeRegExpChars(this.opts.delimiter);return e=e.replace(/%/g,t),new RegExp(e)},compile:function(){var e,t,i=this.opts,n="",r="",o=i.escapeFunction;this.source||(this.generateSource(),n+="  var __output = [], __append = __output.push.bind(__output);\n",!1!==i._with&&(n+="  with ("+i.localsName+" || {}) {\n",r+="  }\n"),r+='  return __output.join("");\n',this.source=n+this.source+r),e=i.compileDebug?"var __line = 1\n  , __lines = "+JSON.stringify(this.templateText)+"\n  , __filename = "+(i.filename?JSON.stringify(i.filename):"undefined")+";\ntry {\n"+this.source+"} catch (e) {\n  rethrow(e, __lines, __filename, __line, escapeFn);\n}\n":this.source,i.client&&(e="escapeFn = escapeFn || "+o.toString()+";\n"+e,i.compileDebug&&(e="rethrow = rethrow || "+l.toString()+";\n"+e)),i.strict&&(e='"use strict";\n'+e),i.debug;try{t=new Function(i.localsName+", escapeFn, include, rethrow",e)}catch(e){throw e instanceof SyntaxError&&(i.filename&&(e.message+=" in "+i.filename),e.message+=" while compiling ejs\n\n",e.message+="If the above error is not helpful, you may want to try EJS-Lint:\n",e.message+="https://github.com/RyanZim/EJS-Lint"),e}if(i.client)return t.dependencies=this.dependencies,t;function s(r){return t.apply(i.context,[r||{},o,function(e,t){var n=h.shallowCopy({},r);return t&&(n=h.shallowCopy(n,t)),function(e,t){var n=h.shallowCopy({},t);return n.filename=m(e,n),u(n)}(e,i)(n)},l])}return s.dependencies=this.dependencies,s},generateSource:function(){this.opts.rmWhitespace&&(this.templateText=this.templateText.replace(/\r/g,"").replace(/^\s+|\s+$/gm,"")),this.templateText=this.templateText.replace(/[ \t]*<%_/gm,"<%_").replace(/_%>[ \t]*/gm,"_%>");var a=this,u=this.parseTemplateText(),l=this.opts.delimiter;u&&u.length&&u.forEach(function(e,t){var n,r,i,o,s,c;if(0===e.indexOf("<"+l)&&0!==e.indexOf("<"+l+l)&&(r=u[t+2])!=l+">"&&r!="-"+l+">"&&r!="_"+l+">")throw new Error('Could not find matching close tag for "'+e+'".');if((i=e.match(/^\s*include\s+(\S+)/))&&(n=u[t-1])&&(n=="<"+l||n=="<"+l+"-"||n=="<"+l+"_"))return o=h.shallowCopy({},a.opts),s=function(e,t){var n,r,i=h.shallowCopy({},t);r=d(n=m(e,i)).toString().replace(f,""),i.filename=n;var o=new v(r,i);return o.generateSource(),{source:o.source,filename:n,template:r}}(i[1],o),c=a.opts.compileDebug?"    ; (function(){\n      var __line = 1\n      , __lines = "+JSON.stringify(s.template)+"\n      , __filename = "+JSON.stringify(s.filename)+";\n      try {\n"+s.source+"      } catch (e) {\n        rethrow(e, __lines, __filename, __line, escapeFn);\n      }\n    ; }).call(this)\n":"    ; (function(){\n"+s.source+"    ; }).call(this)\n",a.source+=c,void a.dependencies.push(p.resolveInclude(i[1],o.filename));a.scanLine(e)})},parseTemplateText:function(){for(var e,t=this.templateText,n=this.regex,r=n.exec(t),i=[];r;)0!==(e=r.index)&&(i.push(t.substring(0,e)),t=t.slice(e)),i.push(r[0]),t=t.slice(r[0].length),r=n.exec(t);return t&&i.push(t),i},_addOutput:function(e){if(this.truncate?(e=e.replace(/^(?:\r\n|\r|\n)/,""),this.truncate=!1):this.opts.rmWhitespace&&(e=e.replace(/^\n/,"")),!e)return e;e=(e=(e=(e=e.replace(/\\/g,"\\\\")).replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace(/"/g,'\\"'),this.source+='    ; __append("'+e+'")\n'},scanLine:function(e){var t,n=this.opts.delimiter;switch(t=e.split("\n").length-1,e){case"<"+n:case"<"+n+"_":this.mode=v.modes.EVAL;break;case"<"+n+"=":this.mode=v.modes.ESCAPED;break;case"<"+n+"-":this.mode=v.modes.RAW;break;case"<"+n+"#":this.mode=v.modes.COMMENT;break;case"<"+n+n:this.mode=v.modes.LITERAL,this.source+='    ; __append("'+e.replace("<"+n+n,"<"+n)+'")\n';break;case n+n+">":this.mode=v.modes.LITERAL,this.source+='    ; __append("'+e.replace(n+n+">",n+">")+'")\n';break;case n+">":case"-"+n+">":case"_"+n+">":this.mode==v.modes.LITERAL&&this._addOutput(e),this.mode=null,this.truncate=0===e.indexOf("-")||0===e.indexOf("_");break;default:if(this.mode){switch(this.mode){case v.modes.EVAL:case v.modes.ESCAPED:case v.modes.RAW:e.lastIndexOf("//")>e.lastIndexOf("\n")&&(e+="\n")}switch(this.mode){case v.modes.EVAL:this.source+="    ; "+e+"\n";break;case v.modes.ESCAPED:this.source+="    ; __append(escapeFn("+g(e)+"))\n";break;case v.modes.RAW:this.source+="    ; __append("+g(e)+")\n";break;case v.modes.COMMENT:break;case v.modes.LITERAL:this._addOutput(e)}}else this._addOutput(e)}this.opts.compileDebug&&t&&(this.currentLine+=t,this.source+="    ; __line = "+this.currentLine+"\n")}},p.escapeXML=h.escapeXML,p.__express=p.renderFile,e.extensions&&(e.extensions[".ejs"]=function(e,t){var n=t||e.filename,r={filename:n,client:!0},i=d(n).toString(),o=p.compile(i,r);e._compile("module.exports = "+o.toString()+";",n)}),p.VERSION=n,p.name="ejs","undefined"!=typeof window&&(window.ejs=p)},{"../package.json":6,"./utils":2,fs:3,path:4}],2:[function(e,t,n){"use strict";var r=/[|\\{}()[\]^$+*?.]/g;n.escapeRegExpChars=function(e){return e?String(e).replace(r,"\\$&"):""};var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},o=/[&<>'"]/g;function s(e){return i[e]||e}n.escapeXML=function(e){return null==e?"":String(e).replace(o,s)},n.escapeXML.toString=function(){return Function.prototype.toString.call(this)+';\nvar _ENCODE_HTML_RULES = {\n      "&": "&amp;"\n    , "<": "&lt;"\n    , ">": "&gt;"\n    , \'"\': "&#34;"\n    , "\'": "&#39;"\n    }\n  , _MATCH_HTML = /[&<>\'"]/g;\nfunction encode_char(c) {\n  return _ENCODE_HTML_RULES[c] || c;\n};\n'},n.shallowCopy=function(e,t){for(var n in t=t||{})e[n]=t[n];return e},n.shallowCopyFromList=function(e,t,n){for(var r=0;r<n.length;r++){var i=n[r];void 0!==t[i]&&(e[i]=t[i])}return e},n.cache={_data:{},set:function(e,t){this._data[e]=t},get:function(e){return this._data[e]},reset:function(){this._data={}}}},{}],3:[function(e,t,n){},{}],4:[function(e,t,u){(function(i){function o(e,t){for(var n=0,r=e.length-1;0<=r;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;)e.unshift("..");return e}function s(e){return t.exec(e).slice(1)}var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;function c(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}u.resolve=function(){for(var e="",t=!1,n=arguments.length-1;-1<=n&&!t;n--){var r=0<=n?arguments[n]:i.cwd();if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(e=r+"/"+e,t="/"===r.charAt(0))}return(t?"/":"")+(e=o(c(e.split("/"),function(e){return!!e}),!t).join("/"))||"."},u.normalize=function(e){var t=u.isAbsolute(e),n="/"===r(e,-1);return(e=o(c(e.split("/"),function(e){return!!e}),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},u.isAbsolute=function(e){return"/"===e.charAt(0)},u.join=function(){var e=Array.prototype.slice.call(arguments,0);return u.normalize(c(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},u.relative=function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;0<=n&&""===e[n];n--);return n<t?[]:e.slice(t,n-t+1)}e=u.resolve(e).substr(1),t=u.resolve(t).substr(1);for(var r=n(e.split("/")),i=n(t.split("/")),o=Math.min(r.length,i.length),s=o,c=0;c<o;c++)if(r[c]!==i[c]){s=c;break}var a=[];for(c=s;c<r.length;c++)a.push("..");return(a=a.concat(i.slice(s))).join("/")},u.sep="/",u.delimiter=":",u.dirname=function(e){var t=s(e),n=t[0],r=t[1];return n||r?n+(r=r&&r.substr(0,r.length-1)):"."},u.basename=function(e,t){var n=s(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},u.extname=function(e){return s(e)[3]};var r="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,e("_process"))},{_process:5}],5:[function(e,t,n){var r,i,o=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(e){r=s}try{i="function"==typeof clearTimeout?clearTimeout:c}catch(e){i=c}}();var u,l=[],p=!1,h=-1;function f(){p&&u&&(p=!1,u.length?l=u.concat(l):h=-1,l.length&&m())}function m(){if(!p){var e=a(f);p=!0;for(var t=l.length;t;){for(u=l,l=[];++h<t;)u&&u[h].run();h=-1,t=l.length}u=null,p=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===c||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new d(e,t)),1!==l.length||p||a(m)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],6:[function(e,t,n){t.exports={name:"ejs",description:"Embedded JavaScript templates",keywords:["template","engine","ejs"],version:"2.5.7",author:"Matthew Eernisse <mde@fleegix.org> (http://fleegix.org)",contributors:["Timothy Gu <timothygu99@gmail.com> (https://timothygu.github.io)"],license:"Apache-2.0",main:"./lib/ejs.js",repository:{type:"git",url:"git://github.com/mde/ejs.git"},bugs:"https://github.com/mde/ejs/issues",homepage:"https://github.com/mde/ejs",dependencies:{},devDependencies:{browserify:"^13.0.1",eslint:"^4.14.0","git-directory-deploy":"^1.5.1",istanbul:"~0.4.3",jake:"^8.0.0",jsdoc:"^3.4.0","lru-cache":"^4.0.1",mocha:"^3.0.2","uglify-js":"^2.6.2"},engines:{node:">=0.10.0"},scripts:{test:"jake test",lint:'eslint "**/*.js" Jakefile',coverage:"istanbul cover node_modules/mocha/bin/_mocha",doc:"jake doc",devdoc:"jake doc[dev]"}}},{}]},{},[1])(1)});
//# sourceMappingURL=ejs.min.js.map