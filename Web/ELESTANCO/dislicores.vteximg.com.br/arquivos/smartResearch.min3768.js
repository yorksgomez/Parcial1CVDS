"function"!=typeof String.prototype.replaceSpecialChars&&(String.prototype.replaceSpecialChars=function(){var t={"ç":"c","æ":"ae","œ":"oe","á":"a","é":"e","í":"i","ó":"o","ú":"u","à":"a","è":"e","ì":"i","ò":"o","ù":"u","ä":"a","ë":"e","ï":"i","ö":"o","ü":"u","ÿ":"y","â":"a","ê":"e","î":"i","ô":"o","û":"u","å":"a","ã":"a","ø":"o","õ":"o",u:"u","Á":"A","É":"E","Í":"I","Ó":"O","Ú":"U","Ê":"E","Ô":"O","Ü":"U","Ã":"A","Õ":"O","À":"A","Ç":"C"};return this.replace(/[\u00e0-\u00fa]/g,function(e){return void 0!==t[e]?t[e]:e})}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),jQuery.fn.vtexSmartResearch=function(e){var r=jQuery(this),t={pageLimit:null,loadContent:".prateleira[id^=ResultItems]",shelfClass:".prateleira",filtersMenu:".search-multiple-navigator",linksMenu:".search-single-navigator",menuDepartament:".navigation .menu-departamento",mergeMenu:!0,insertMenuAfter:".search-multiple-navigator h3:first",emptySearchElem:jQuery('<div class="vtexsr-emptySearch"></div>'),elemLoading:'<div id="scrollLoading">Carregando ... </div>',returnTopText:'<span class="text">voltar ao</span><span class="text2">TOPO</span>',emptySearchMsg:"<h3>Esta combinação de filtros não retornou nenhum resultado!</h3>",filterErrorMsg:"Houve um erro ao tentar filtrar a página!",searchUrl:null,usePopup:!1,showLinks:!0,popupAutoCloseSeconds:3,allowInfiniteScroll:!0,filterScrollTop:function(e){return e.top-20},callback:function(){},getShelfHeight:function(e){return e.scrollTop()+e.height()},shelfCallback:function(){},ajaxCallback:function(){},emptySearchCallback:function(){},authorizeScroll:function(){return!0},authorizeUpdate:function(){return!0},labelCallback:function(e){},filterCallback:function(e,t){}},l=jQuery.extend(t,e),a=jQuery(""),n=jQuery(l.elemLoading),i=2,o=!0,s=jQuery(window),u=(jQuery(document),jQuery("html,body")),c=jQuery("body"),f="",p="",d="",h=!1,m=jQuery(l.loadContent),g=jQuery(l.filtersMenu),v={requests:0,filters:0,isEmpty:!1},y={},C={getUrl:function(e){return e||!1?f.replace(/PageNumber=[0-9]*/,"PageNumber="+i):(d+p).replace(/PageNumber=[0-9]*/,"PageNumber="+T)},getSearchUrl:function(){var e,t,r;return jQuery("script:not([src])").each(function(){if(t=jQuery(this)[0].innerHTML,r=/\/buscapagina\?.+&PageNumber=/i,-1<t.search(/\/buscapagina\?/i))return e=r.exec(t),!1}),void 0!==e&&void 0!==e[0]?e[0]:""},scrollToTop:function(){var e=c.find("#returnToTop");e.length<1&&(e=jQuery('<div id="returnToTop"><a href="#">'+l.returnTopText+'<span class="arrowToTop"></span></a></div>'),c.append(e));var t=s.height();s.bind("resize",function(){t=s.height()}),s.bind("scroll",function(){s.scrollTop()>t?e.stop(!0).fadeTo(300,1,function(){e.show()}):e.stop(!0).fadeTo(300,0,function(){e.hide()})}),e.bind("click",function(){return u.animate({scrollTop:0},"slow"),!1})},infinitScroll:function(){var r,a,e;e=(c.find(".pager:first").attr("id")||"").split("_").pop(),r=null!==l.pageLimit?l.pageLimit:window["pagecount_"+e],a=!0,void 0===r&&(r=99999999),s.bind("scroll",function(){var e=jQuery(this);if(!(!h&&i<=r&&o&&l.authorizeScroll(v)))return!1;if(e.scrollTop()+e.height()>=l.getShelfHeight(m)&&a){var t=m.find(l.shelfClass).filter(":last");t.after(n),a=!1,k=jQuery.ajax({url:C.getUrl(!0),success:function(e){e.trim().length<1?o=!1:t.after(e),a=!0,n.remove(),v.requests++,l.ajaxCallback(v)}}),i++}})}};if(f=d=null!==l.searchUrl?l.searchUrl:C.getSearchUrl(),r.length<1)return l.showLinks&&jQuery(l.linksMenu).css("visibility","visible").show(),l.allowInfiniteScroll&&C.infinitScroll(),C.scrollToTop(),r;if(m.length<1)return m.selector,!1;g.length<1&&g.selector;document.location.href;var b=jQuery(l.linksMenu),j=jQuery('<div class="vtexSr-overlay"></div>'),S=jQuery(l.menuDepartament),x=m.offset(),T=1,Q=null,k=null;l.emptySearchElem.append(l.emptySearchMsg),m.before(j);var M={exec:function(){M.setFilterMenu(),M.fieldsetFormat(),r.each(function(){var e=jQuery(this),t=e.parent();e.is(":checked")&&(p+="&"+(e.attr("rel")||""),t.addClass("sr_selected")),M.adjustText(e),t.append('<span class="sr_box"></span><span class="sr_box2"></span>'),e.bind("change",function(){M.inputAction(),e.is(":checked")?(M.addFilter(e),l.filterCallback(e,"add")):(M.removeFilter(e),l.filterCallback(e,"remove")),v.filters=r.filter(":checked").length})}),""!==p&&M.addFilter(a),l.filterCallback(a,"add")},mergeMenu:function(){if(!l.mergeMenu)return!1;var e=S;e.insertAfter(l.insertMenuAfter),M.departamentMenuFormat(e)},mergeMenuList:function(){var t=0;g.find("h3,h4").each(function(){var e=b.find("h3,h4").eq(t).next("ul");e.insertAfter(jQuery(this)),M.departamentMenuFormat(e),t++})},departamentMenuFormat:function(e){e.find("a").each(function(){var e=jQuery(this);e.text(M.removeCounter(e.text()))})},fieldsetFormat:function(){y.fieldsetCount=0,y.tmpCurrentLabel={},g.find("fieldset").each(function(){var n=jQuery(this),e=n.find("label"),i="filtro_"+(n.find("h5:first").text()||"").toLowerCase().replaceSpecialChars().replace(/\s/g,"-");y[i]={},e.length<1?n.hide():(n.addClass(i),e.each(function(e){var t=jQuery(this),r=t.find("input").val()||"",a="sr_"+r.toLowerCase().replaceSpecialChars().replace(/\s/g,"-");y.tmpCurrentLabel={fieldsetParent:[n,i],elem:t},y[i][e.toString()]={className:a,title:r},t.addClass(a).attr({title:r,index:e}),l.labelCallback(y)}),y.fieldsetCount++)})},inputAction:function(){null!==k&&k.abort(),null!==Q&&Q.abort(),i=2,o=!0},addFilter:function(e){p+="&"+(e.attr("rel")||""),j.fadeTo(300,.6),f=C.getUrl(),Q=jQuery.ajax({url:f,success:M.filterAjaxSuccess,error:M.filterAjaxError}),e.parent().addClass("sr_selected")},removeFilter:function(e){var t=e.attr("rel")||"";j.fadeTo(300,.6),""!==t&&(p=p.replace("&"+t,"")),f=C.getUrl(),Q=jQuery.ajax({url:f,success:M.filterAjaxSuccess,error:M.filterAjaxError}),e.parent().removeClass("sr_selected")},filterAjaxSuccess:function(e){var t=jQuery(e);j.fadeTo(300,0,function(){jQuery(this).hide()}),M.updateContent(t),v.requests++,l.ajaxCallback(v),u.animate({scrollTop:l.filterScrollTop(x||{top:0,left:0})},600)},filterAjaxError:function(){j.fadeTo(300,0,function(){jQuery(this).hide()})},updateContent:function(e){if(h=!0,!l.authorizeUpdate(v))return!1;var t=e.filter(l.shelfClass),r=m.find(l.shelfClass);(0<r.length?r:l.emptySearchElem).slideUp(600,function(){jQuery(this).remove(),l.usePopup?c.find(".boxPopUp2").vtexPopUp2():l.emptySearchElem.remove(),0<t.length?(t.hide(),m.append(t),l.shelfCallback(),t.slideDown(600,function(){h=!1}),v.isEmpty=!1):(v.isEmpty=!0,l.usePopup?l.emptySearchElem.addClass("freeContent autoClose ac_"+l.popupAutoCloseSeconds).vtexPopUp2().stop(!0).show():(m.append(l.emptySearchElem),l.emptySearchElem.show().css("height","auto").fadeTo(300,.2,function(){l.emptySearchElem.fadeTo(300,1)})),l.emptySearchCallback(v))})},adjustText:function(e){var t=e.parent(),r=t.text();qtt="",r=M.removeCounter(r),t.text(r).prepend(e)},removeCounter:function(e){return e.replace(/\([0-9]+\)/gi,function(e){return qtt=e.replace(/\(|\)/,""),""})},setFilterMenu:function(){0<g.length&&(b.hide(),g.show())}};c.hasClass("departamento")?M.mergeMenu():(c.hasClass("categoria")||c.hasClass("resultado-busca"))&&M.mergeMenuList(),M.exec(),l.allowInfiniteScroll&&C.infinitScroll(),C.scrollToTop(),l.callback(),g.css("visibility","visible")};
//# sourceMappingURL=smartResearch.min.js.map